(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const i=document.querySelector(".chat__main"),l=document.querySelector(".btn-send"),n=document.querySelector(".user-input");let a=!1;l.addEventListener("click",function(){let o=n.value.trim();a||(y(o),i.scrollTop=i.scrollHeight)});async function y(o){const t=document.querySelector(".chat__main");t.innerHTML+=`<div class="user">${o}</div>`,a=!0;try{const c=await(await fetch("http://localhost:3000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})})).json();setTimeout(()=>{const e=document.createElement("div");e.className="loading-dots",e.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(e),t.scrollTop=t.scrollHeight,setTimeout(()=>{t.removeChild(e),t.innerHTML+=`<div class="bot">${c.response}</div>`,t.scrollTop=t.scrollHeight,a=!1},2e3)},500)}catch(r){console.error("Erreur:",r),t.innerHTML+='<div class="message bot">Erreur de serveur</div>'}n.value="",l.style.opacity="0",n.focus()}const p=document.querySelector(".chat__button"),f=document.querySelector(".chat"),v=document.querySelector(".chat__close");p.addEventListener("click",()=>{f.classList.toggle("show"),n.focus()});v.addEventListener("click",()=>{f.classList.remove("show")});let m=!1;window.addEventListener("scroll",()=>{!m&&window.scrollY>100&&(f.classList.add("show"),n.focus(),m=!0)});n.addEventListener("input",()=>{var o=n.value.trim();o!==""?l.style.opacity="1":l.style.opacity="0"});n.addEventListener("keydown",o=>{var t=n.value.trim();o.key==="Enter"&&t!==""&&!a?(y(t),i.scrollTop=i.scrollHeight):console.log("error")});const h=document.querySelector(".btn-connexion"),g=document.querySelectorAll(".course"),u=document.querySelector(".layer");h.addEventListener("click",()=>{connexion.classList.toggle("connect"),u.style.display="block"});u.addEventListener("click",()=>{u.style.display="none",connexion.classList.toggle("connect")});g.forEach(o=>{o.addEventListener("click",()=>{console.log(o),o.classList.toggle("active")})});
